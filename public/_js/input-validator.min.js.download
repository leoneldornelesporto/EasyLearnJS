/*! ppplusbrcpmnodeweb 01-10-2021 */
require(["jquery"],function(a){"use strict";function b(a,b){return a!==b.ui.keyCode.ENTER&&a!==b.ui.keyCode.TAB&&a!==b.ui.keyCode.ESCAPE&&a!==b.ui.keyCode.CONTROL&&a!==b.ui.keyCode.ALT&&a!==b.ui.keyCode.UP&&a!==b.ui.keyCode.DOWN&&a!==b.ui.keyCode.LEFT&&a!==b.ui.keyCode.RIGHT&&a!==b.ui.keyCode.WINDOWS&&a!==b.ui.keyCode.CAPS_LOCK&&a!==b.ui.keyCode.SHIFT}a.widget("pp.inputValidator",a.pp.validator,{options:{state:"information",restrictions:{},requirements:{},restrictionsClass:"restriction",requirementsClass:"requirement",parentClass:"textInput",selectParentClass:"selectDropdown",completedClass:"",errorClass:"error",informationClass:"information",notificationClass:"notification",errorContainerClass:"errorContainer",informationContainerClass:"informationContainer",notificationContainerClass:"notificationContainer",optionalValidationsContainerClass:"caret",validationsContainerClass:"validationsContainer",validationsContainerSuffix:"Validations",validateOn:"blur timeout",validationTimeout:3e3,hideDuration:200,showDuration:200,insertAfter:null,onHide:function(){},onShow:function(){},onValidate:function(){clearTimeout(this.validationTimeout)},onSuccess:function(){var a;a=this.element.is("select")?this.element.closest("."+this.options.selectParentClass):this.element.closest("."+this.options.parentClass),a.removeClass(this.options.notificationClass),a.removeClass(this.options.errorClass),a.addClass(this.options.completedClass),this.element.attr("aria-invalid",!1)},onFailure:function(a){this._notificationFailure(a)}},_create:function(){a.pp.validator.prototype._create.call(this),this._addListeners(),this.changeState(this.options.state),this._addValidations(this.options.requirements,this.options.requirementsClass),this._addValidations(this.options.restrictions,this.options.restrictionsClass),a.ui.keyCode.ENTER=13,a.ui.keyCode.TAB=9,a.ui.keyCode.ESCAPE=27,a.ui.keyCode.CONTROL=17,a.ui.keyCode.ALT=18,a.ui.keyCode.UP=38,a.ui.keyCode.DOWN=40,a.ui.keyCode.LEFT=37,a.ui.keyCode.RIGHT=39,a.ui.keyCode.WINDOWS=91,a.ui.keyCode.CAPS_LOCK=20,a.ui.keyCode.SHIFT=16},disable:function(){this.reset(),a.pp.validator.prototype.disable.call(this)},reset:function(){var a=this.element.closest("."+this.options.parentClass);a.removeClass(this.options.notificationClass),a.removeClass(this.options.errorClass),a.removeClass(this.options.completedClass),this.element.attr("aria-invalid",!1)},changeState:function(a){this.options.onFailure=this["_"+a+"Failure"]},addErrors:function(b){a.each(b,a.proxy(function(b,c){this.options.validations[c]||(this.options.validations[c]={test:a.proxy(function(){return!this.element.hasClass("serverError")},this),onSuccess:a.proxy(function(){this._deactivateItem(c),delete this.options.validations[c]},this),onFailure:function(){this._activateItem(c,"error")}})},this))},_addListeners:function(){this.element.on(this.options.validateOn,a.proxy(function(c){"keyup"===c.type||"keydown"===c.type||"keypress"===c.type?b(c.keyCode,a)&&this.validate(c):this.validate(c)},this)),this.element.on("keyup",a.proxy(function(c){b(c.keyCode,a)&&(clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(a.proxy(function(){this.element.trigger("timeout",[c])},this),this.options.validationTimeout))},this)),this.element.on("focus",a.proxy(function(){this.element.closest("."+this.options.parentClass).hasClass(this.options.notificationClass)&&this._validationsContainer&&this._validationsContainer.fadeIn(a.proxy(this.options.onShow,this))},this)),this.element.on("blur",a.proxy(function(){this._validationsContainer&&"agree_consentValidations"!==this._validationsContainer[0].id&&this._validationsContainer.fadeOut(a.proxy(this.options.onHide,this))},this))},_addValidations:function(b,c){a.each(b,a.proxy(function(b,d){this.options.validations[b]||(this.options.validations[b]={test:d,onSuccess:a.proxy(function(){this._deactivateItem(b)},this),onFailure:a.proxy(function(){this._activateItem(b,c)},this)})},this))},_createValidationsContainer:function(){var b,c=(this.element.attr("id")||this.element.attr("name"))+this.options.validationsContainerSuffix,d=this.options.insertAfter||this.element;return b=this.element.closest("."+this.options.parentClass).find("."+this.options.errorContainerClass),b.length?(b.empty(),b.attr({id:c,class:this.options.validationsContainerClass+" "+this.options.optionalValidationsContainerClass+" "+this.options[this.options.state+"ContainerClass"]})):b=a("<div/>",{id:c,class:this.options.validationsContainerClass+" "+this.options.optionalValidationsContainerClass+" "+this.options[this.options.state+"ContainerClass"]}),b.append(a("<ul/>")),d.after(b),this.element.attr("aria-describedby",c),b.on("validator:activate validator:deactivate",a.proxy(this._updateValidationsDisplay,this)),b},_getValidationItem:function(b){var c;return this._validationsContainer&&a.each(a("li",this._validationsContainer),function(d,e){e=a(e),e.text()===b&&(c=e)}),c&&c.length?c:null},_createValidationItem:function(b,c){var d=a("<li/>",{class:c,text:b});return this._validationsContainer||(this._validationsContainer=this._createValidationsContainer()),this._validationsContainer.find("ul").append(d),d},_updateValidationsDisplay:function(){var b=this._validationsContainer,c=!!a("li.active",b).length,d=document.activeElement===this.element[0];c?b.is(":hidden")&&d&&b.fadeIn(this.options.showDuration,a.proxy(this.options.onShow,this)):b.fadeOut(a.proxy(this.options.onHide,this))},_activateItem:function(a,b){var c=this._getValidationItem(a)||this._createValidationItem(a,b);c.addClass("active"),c.show(),c.trigger("validator:activate"),c.data("timeoutId")&&(clearTimeout(c.data("timeoutId")),c.data("timeoutId",null))},_deactivateItem:function(a){var b=this._getValidationItem(a);b&&!b.data("timeoutId")&&b.data("timeoutId",setTimeout(function(){b.data("timeoutId",null),b.removeClass("active"),b.fadeOut(function(){b.remove()}),b.trigger("validator:deactivate")},this.options.hideDuration))},_inputFailure:function(){this.element.is("select")?this.element.closest("."+this.options.selectParentClass).removeClass(this.options.completedClass):this.element.closest("."+this.options.parentClass).removeClass(this.options.completedClass),this.element.attr("aria-invalid",!0)},_informationFailure:function(){var a;a=this.element.is("select")?this.element.closest("."+this.options.selectParentClass):this.element.closest("."+this.options.parentClass),this._inputFailure(),this._changeState("information"),a.removeClass(this.options.errorClass),a.removeClass(this.options.notificationClass),a.addClass(this.options.informationClass)},_errorFailure:function(){var a;a=this.element.is("select")?this.element.closest("."+this.options.selectParentClass):this.element.closest("."+this.options.parentClass),this._inputFailure(),this._changeState("error"),a.removeClass(this.options.informationClass),a.removeClass(this.options.notificationClass),a.addClass(this.options.errorClass)},_notificationFailure:function(){var a;a=this.element.is("select")?this.element.closest("."+this.options.selectParentClass):this.element.closest("."+this.options.parentClass),this._inputFailure(),this._changeState("notification"),a.removeClass(this.options.errorClass),a.removeClass(this.options.informationClass),a.addClass(this.options.notificationClass)},_hideOthers:function(b,c){a(b).each(a.proxy(function(b,d){d=a(d),d[0]!==this.element.closest("."+this.options.parentClass)[0]&&d.find(c).fadeOut(a.proxy(this.options.onHide,this))},this))},_changeState:function(a){this.options.state=a,"information"===a?(this._validationsContainer.removeClass(this.options.errorContainerClass),this._validationsContainer.removeClass(this.options.notificationContainerClass)):"notification"===a?(this._validationsContainer.removeClass(this.options.errorContainerClass),this._validationsContainer.removeClass(this.options.informationContainerClass)):"error"===a&&(this._validationsContainer.removeClass(this.options.notificationContainerClass),this._validationsContainer.removeClass(this.options.informationContainerClass)),this._validationsContainer.addClass(this.options[a+"ContainerClass"])}}),a.pp.inputValidator.showErrors=function(b){a.each(b,function(b,c){var d=a("*[name='"+b+"']"),e=d.data("pp-inputValidator");e||(e=d.inputValidator({validateOn:"focus change keyup"}).data("pp-inputValidator")),e&&e.addErrors(c),d.addClass("serverError")}),a(".serverError")[0]&&a(".serverError")[0].focus(),a.each(a(".serverError").get().reverse(),function(b,c){c=a(c);var d=c.data("pp-inputValidator");d.changeState("error"),d.validate({type:"submit"}),d.changeState("notification")})}});