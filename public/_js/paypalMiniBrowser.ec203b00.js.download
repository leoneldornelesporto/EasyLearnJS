"use strict";var PaypalMiniBrowser=function(o,a){function t(){r&&i&&l?m.enable():m.disable()}var m={},r=!!a&&new PaymentFormValidator(o.paymentForm).isValidName(),i=!!a&&new PaymentFormValidator(o.paymentForm).isValidEmail(),l=!!a&&new PaymentFormValidator(o.paymentForm).isValidCPF();paypal.Button.render({env:$(".payment-info").data("paypal-mode"),locale:$(".payment-info").data("locale"),commit:!0,style:{color:"blue",size:"small",label:"pay"},validate:function(a){var e,n;a.disable(),m=a,o.paymentForm.inputs.name.on("focusout",function(a){r=new PaymentFormValidator(o.paymentForm).isValidName(),t()}),o.paymentForm.inputs.email.on("focusout",function(a){i=new PaymentFormValidator(o.paymentForm).isValidEmail(),t()}),o.paymentForm.inputs.cpf.on("focusout",function(a){l=new PaymentFormValidator(o.paymentForm).isValidCPF(),t()}),o.paymentForm.inputs.isForeigner.on("change",function(a){l=new PaymentFormValidator(o.paymentForm).shouldHaveValidCPFOrIsAForeigner(),t()}),e=o.paymentForm.inputs.name.val().trim(),n=o.paymentForm.inputs.email.val().trim(),a=o.paymentForm.inputs.cpf.val().trim(),(e||a||n)&&(r=new PaymentFormValidator(o.paymentForm).isValidName(),i=new PaymentFormValidator(o.paymentForm).isValidEmail(),l=new PaymentFormValidator(o.paymentForm).isValidCPF()),t()},payment:function(){return o.paymentForm.paymentId},onAuthorize:function(a,e){var n={paymentID:a.paymentID,payerID:a.payerID,discountCode:o.paymentForm.discountCode(),usernameIndicate:o.paymentForm.usernameIndicate,document:o.paymentForm.inputs.cpf.val()};return(new PaypalPaymentValidator).validate(a),paypal.request.post("/payment/execute",n).then(function(a){try{new PaymentAnalytics(o.paymentForm).doAllAnalytics(a)}catch(a){console.log("Não foi possível enviar dados para o Analytics"),console.log(a)}a.problemToDeliver?o.paymentForm.goToFailToDelivery():o.paymentForm.goToSuccessStep()})},onError:function(a,e){try{new PaymentAnalytics(o.paymentForm).sendFail(a.message.name)}catch(a){console.error("could not send fail event to analytics")}"PAYMENT_RESTRICTION"===a.message.name?o.paymentForm.goToFailStep():"INTERNAL_SERVICE_ERROR"===a.message.name?o.paymentForm.goToTechnicalFailure():o.paymentForm.hasPaypalError||o.paymentForm.goToPaypalFailure()},onClick:function(){new PaymentFormValidator(o.paymentForm).validateAllFields()}},"#paypal-button-container")};