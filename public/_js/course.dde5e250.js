"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Course=function(){function t(){_classCallCheck(this,t),this.htmlTag=$("html"),this.sectionMoreInfo=$(".courseSectionList-moreInfo"),this.studyPlanBtn=$(".studyPlan-button"),this.otherActionsBtn=$(".otherActions-button"),this.guideCardAddCourseContent=$(".guide-card__add-course-content"),this.studyPlanMenuFirstStep=$(".course-header-button-menu__first-step"),this.studyPlanMenuSecondStep=$(".course-header-button-menu__second-step"),this.studyPlanMenuThirdStep=$(".course-header-button-menu__third-step"),this.addCourseContentStudyPlanBtn=$(".course-header-button-menu__add-guide"),this.okPlanBtn=$(".okPlan")}return _createClass(t,[{key:"showTasksBySection",value:function(t){t=$(t.currentTarget);t.toggleClass("courseSectionList-moreInfo__rotate"),t.closest(".courseSection-listItem").find(".courseSectionList-ementa").toggleClass("courseSectionList-ementa__show")}},{key:"showMenuStudyPlan",value:function(t){t.stopPropagation(),t.preventDefault(),this.studyPlanBtn.siblings().toggleClass("showMenu"),this.otherActionsBtn.siblings().removeClass("showMenu")}},{key:"showMenuOtherActions",value:function(t){t.stopPropagation(),t.preventDefault(),this.otherActionsBtn.siblings().toggleClass("showMenu"),this.studyPlanBtn.siblings().removeClass("showMenu")}},{key:"addCourseContent",value:function(t){var t=$(t.currentTarget),t={id:t.data("userGuideId"),courseId:t.data("courseId")},e=this.studyPlanMenuFirstStep,n=this.studyPlanMenuSecondStep;$.post("/user-guide/add-course-content",t).done(function(t){e.attr("data-show",!1),n.attr("data-show",!0),n.find(".course-header-button-menu__guideTitle").text(t.title),n.find(".editPlan").attr("href","/user-guide/edit/"+t.id)}).fail(function(t){alert(t.responseText)})}},{key:"createStudyPlanCourseContent",value:function(t){var t={courseId:$(t.currentTarget).data("courseId")},e=this.studyPlanMenuFirstStep,n=this.studyPlanMenuThirdStep;$.post("/create-user-guide/course-content",t).done(function(t){e.attr("data-show",!1),n.attr("data-show",!0),n.find(".editPlan").attr("href","/user-guide/edit/"+t.id)}).fail(function(t){alert(t.responseText)})}},{key:"resetMenu",value:function(){this.studyPlanBtn.siblings().removeClass("showMenu"),this.otherActionsBtn.siblings().removeClass("showMenu"),this.studyPlanMenuFirstStep.attr("data-show",!0),this.studyPlanMenuSecondStep.attr("data-show",!1),this.studyPlanMenuThirdStep.attr("data-show",!1)}},{key:"hideMenus",value:function(t){0<$(t.target).parents(".course-header-button-wrapper").length||this.resetMenu()}},{key:"refreshListeners",value:function(){var e=this;this.sectionMoreInfo.on("click",function(t){return e.showTasksBySection(t)}),this.studyPlanBtn.on("click",function(t){return e.showMenuStudyPlan(t)}),this.otherActionsBtn.on("click",function(t){return e.showMenuOtherActions(t)}),this.guideCardAddCourseContent.on("click",function(t){return e.addCourseContent(t)}),this.addCourseContentStudyPlanBtn.on("click",function(t){return e.createStudyPlanCourseContent(t)}),this.okPlanBtn.on("click",function(){return e.resetMenu()}),this.htmlTag.on("click",function(t){return e.hideMenus(t)})}}]),t}();